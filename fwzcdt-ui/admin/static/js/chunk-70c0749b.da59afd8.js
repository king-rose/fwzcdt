(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70c0749b"],{"0a66":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return n}));var s=a("b775");function r(e){return Object(s["a"])({url:"/mapping/"+e,method:"delete"})}function l(e){return Object(s["a"])({url:"/mapping/relation/"+e,method:"get"})}function n(e){return Object(s["a"])({url:"/mapping/list",method:"get",params:e})}},1067:function(e,t,a){},8136:function(e,t,a){"use strict";a.d(t,"h",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return n})),a.d(t,"i",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"j",(function(){return p})),a.d(t,"k",(function(){return h}));var s=a("b775");function r(){return Object(s["a"])({url:"/system/techDepts",method:"get"})}function l(){return Object(s["a"])({url:"/system/principals",method:"get"})}function n(){return Object(s["a"])({url:"/system/systemLayers",method:"get"})}function o(e){return Object(s["a"])({url:"/system/list",method:"get",params:e})}function i(e){return Object(s["a"])({url:"/system",method:"post",data:e})}function c(){return Object(s["a"])({url:"/system/sysNum",method:"get"})}function u(){return Object(s["a"])({url:"/system/sceneNum",method:"get"})}function m(){return Object(s["a"])({url:"/system/consumeNum",method:"get"})}function d(e){return Object(s["a"])({url:"/system/trend/"+e,method:"get"})}function p(){return Object(s["a"])({url:"/system/scene/ratio",method:"get"})}function h(){return Object(s["a"])({url:"/system/scene/serviceScene",method:"get"})}},de9d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-header",{staticStyle:{width:"100%","margin-bottom":"10px"}},[e._v("服务场景消费查询")]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{inline:!0,model:e.queryParams,"label-width":"88px"}},[a("el-form-item",{attrs:{label:"消费方:",prop:"reqSysId"}},[a("el-select",{model:{value:e.queryParams.reqSysId,callback:function(t){e.$set(e.queryParams,"reqSysId",t)},expression:"queryParams.reqSysId"}},[a("el-option",{attrs:{label:"--请选择--",value:""}}),e._l(e.sysListOptions,(function(e){return a("el-option",{key:e.sysId,attrs:{value:e.sysId,label:e.sysName}})}))],2)],1),a("el-form-item",{attrs:{label:"提供方:",prop:"proSysId"}},[a("el-select",{model:{value:e.queryParams.proSysId,callback:function(t){e.$set(e.queryParams,"proSysId",t)},expression:"queryParams.proSysId"}},[a("el-option",{attrs:{label:"--请选择--",value:""}}),e._l(e.sysListOptions,(function(e){return a("el-option",{key:e.sysId,attrs:{value:e.sysId,label:e.sysName}})}))],2)],1),a("el-form-item",{attrs:{label:"服务:",prop:"serviceId"}},[a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:e.queryParams.serviceId,callback:function(t){e.$set(e.queryParams,"serviceId",t)},expression:"queryParams.serviceId"}},[a("el-option",{attrs:{value:"",label:"--请选择--"}}),a("el-option",{attrs:{value:"1",label:"AdjustCreditLimit——信用卡余额"}}),a("el-option",{attrs:{value:"2",label:"AuthorPOS——POS预授权"}})],1)],1),a("el-form-item",{attrs:{label:"提供方接口:",prop:"proTradeCode"}},[a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:e.queryParams.proTradeCode,callback:function(t){e.$set(e.queryParams,"proTradeCode",t)},expression:"queryParams.proTradeCode"}},[a("el-option",{attrs:{value:"",label:"--请选择--"}})],1)],1),a("el-form-item",{attrs:{label:"消费状态:",prop:"state"}},[a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},[a("el-option",{attrs:{value:"-1",label:"--请选择--"}}),a("el-option",{attrs:{value:"1",label:"预消费"}}),a("el-option",{attrs:{value:"2",label:"审核中"}}),a("el-option",{attrs:{value:"3",label:"已发布"}}),a("el-option",{attrs:{value:"4",label:"已废弃"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-fresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.queryParams.mappingId,expression:"!queryParams.mappingId"}],staticClass:"mb8",staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["systemLIst:systemLIst:add"],expression:"['systemLIst:systemLIst:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["systemLIst:systemLIst:edit"],expression:"['systemLIst:systemLIst:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改 ")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["systemLIst:systemLIst:remove"],expression:"['systemLIst:systemLIst:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除 ")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["systemLIst:systemLIst:export"],expression:"['systemLIst:systemLIst:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.mappingList,"cell-style":e.cellStyle},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"消费方",align:"center",prop:"reqSysName"}}),a("el-table-column",{attrs:{label:"服务编号",align:"center",prop:"svcCode",width:"150"}}),a("el-table-column",{staticStyle:{color:"#49ba9c"},attrs:{label:"服务中文名",align:"center",prop:"svcName"}}),a("el-table-column",{attrs:{label:"场景码",align:"center",prop:"svCode"}}),a("el-table-column",{attrs:{label:"场景中文名",align:"center",prop:"svName"}}),a("el-table-column",{attrs:{label:"关联接口",align:"center",prop:"svInterface",width:"150"}}),a("el-table-column",{attrs:{label:"提供方",align:"center",prop:"proSysName"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1"==t.row.state?"预消费":"2"==t.row.state?"审核中":"3"==t.row.state?"已发布":"已废弃"))])]}}])}),a("el-table-column",{attrs:{label:"消费时间",align:"center",prop:"crtTime"}}),a("el-table-column",{attrs:{label:"超时时间",align:"center",prop:"timeOut"}}),a("el-table-column",{attrs:{label:"业务交易代码",align:"center",prop:"businessCode"}}),a("el-table-column",{attrs:{label:"业务交易名称",align:"center",prop:"businessName"}}),a("el-table-column",{attrs:{label:"集成方式",align:"center",prop:"svIntegrationMode"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("0"==t.row.svIntegrationMode?"内联ESB":"1"==t.row.state?"外联ESB":"直连"))])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{visible:e.open,title:"服务消费申请"},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"128px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目编号:"}},[a("el-select",{model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}},[a("el-option",{attrs:{label:"--请选择--",value:""}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"消费方:"}},[a("el-select",{model:{value:e.form.proSysId,callback:function(t){e.$set(e.form,"proSysId",t)},expression:"form.proSysId"}},[a("el-option",{attrs:{label:"--请选择--",value:""}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提供方:"}},[a("el-select",{model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}},[a("el-option",{attrs:{label:"--请选择--",value:""}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"服务:"}},[a("el-select",{model:{value:e.form.proSysId,callback:function(t){e.$set(e.form,"proSysId",t)},expression:"form.proSysId"}},[a("el-option",{attrs:{label:"--请选择--",value:""}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提供方接口:"}},[a("el-select",{model:{value:e.form.projectCode,callback:function(t){e.$set(e.form,"projectCode",t)},expression:"form.projectCode"}},[a("el-option",{attrs:{label:"--请选择--",value:""}})],1)],1)],1)],1)],1),a("el-row",{staticClass:"m20 mb20",staticStyle:{width:"40%","text-align":"center"},attrs:{gutter:10}},[a("el-button",{staticStyle:{"background-color":"#1ab394"},attrs:{type:"info",size:"mini"}},[e._v("提交")]),a("el-button",{staticStyle:{"background-color":"#1ab394"},attrs:{type:"info",size:"mini"}},[e._v("添加到预消费清单")]),a("el-button",{staticStyle:{"background-color":"#1ab394"},attrs:{type:"info",size:"mini"}},[e._v("查看预消费清单")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.serviceSceneList,height:250}},[a("el-table-column",{attrs:{type:"selection",width:"50px"}}),a("el-table-column",{attrs:{label:"服务编号","min-width":"8%"}}),a("el-table-column",{attrs:{label:"服务名称","min-width":"8%"}}),a("el-table-column",{attrs:{label:"场景码","min-width":"7%"}}),a("el-table-column",{attrs:{label:"场景名称","min-width":"10%"}}),a("el-table-column",{attrs:{label:"关联接口","min-width":"10%"}}),a("el-table-column",{attrs:{label:"提供方","min-width":"10%"}}),a("el-table-column",{attrs:{label:"状态","min-width":"7%"}}),a("el-table-column",{attrs:{label:"超时时间","min-width":"10%"}}),a("el-table-column",{attrs:{label:"业务交易代码","min-width":"12.5%"}}),a("el-table-column",{attrs:{label:"业务交易名称","min-width":"12.5%"}})],1)],1)],1)},r=[],l=(a("d81d"),a("0a66")),n=a("8136"),o={name:"consumeRelation",components:{},data:function(){return{loading:!0,ids:[],serviceSceneList:[],single:!0,multiple:!0,showSearch:!0,total:0,mappingList:[],sysListOptions:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,reqSysId:null,proSysId:null,serviceId:null,proTradeCode:null,state:null,mappingId:""},form:{},rules:{}}},activated:function(){this.$route.query.reqSysId&&(this.queryParams.reqSysId=this.$route.query.reqSysId),this.$route.query.proSysId&&(this.queryParams.proSysId=this.$route.query.proSysId),(this.$route.query.proSysId||this.$route.query.reqSysId)&&(this.showSearch=!1),this.getList()},created:function(){this.getSysData()},methods:{cellStyle:function(e){if("场景中文名"===e.column.label||"状态"===e.column.label)return"color:#49ba9c"},getSysData:function(){var e=this;Object(n["i"])().then((function(t){e.sysListOptions=t.rows}))},getList:function(){var e=this;this.loading=!0,Object(l["c"])(this.queryParams).then((function(t){e.mappingList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={xff:null,tgf:null,fw:null,tgfjk:null,xfzt:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.mappingId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加系统列表"},handleUpdate:function(e){var t=this;this.reset();var a=e.sysId||this.ids;getSystemLIst(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改系统列表"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.sysId?updateSystemLIst(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getList()})):addSystemLIst(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this;console.log(this.ids);var a=e.mappingId||this.ids;this.$confirm('是否确认删除系统列表编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有系统列表数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return exportSystemLIst(t)})).then((function(t){e.download(t.msg)}))}}},i=o,c=(a("e9cf"),a("2877")),u=Object(c["a"])(i,s,r,!1,null,null,null);t["default"]=u.exports},e9cf:function(e,t,a){"use strict";a("1067")}}]);